# UI ç»„ä»¶å’Œå·¥å…· - å›½é™…åŒ–æ–¹æ¡ˆ

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
> **åˆ›å»ºæ—¶é—´**: 2025-11-30
> **Coze Studio æºç **: `@coze-arch/i18n`, `@coze-foundation/i18n`

## ä¸€ã€æ¦‚è¿°

å›½é™…åŒ–ï¼ˆi18nï¼‰æ˜¯æ”¯æŒå¤šè¯­è¨€çš„å…³é”®æŠ€æœ¯ã€‚æœ¬æ–‡æ¡£åŸºäº react-i18next æä¾›å®Œæ•´çš„å›½é™…åŒ–è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬é…ç½®ã€ä½¿ç”¨ã€æœ€ä½³å®è·µå’Œæ€§èƒ½ä¼˜åŒ–ã€‚

### 1.1 æŠ€æœ¯é€‰å‹

| æŠ€æœ¯ | è¯´æ˜ | ç†ç”± |
|------|------|------|
| **i18next** | å›½é™…åŒ–æ¡†æ¶ | åŠŸèƒ½å¼ºå¤§ã€ç”Ÿæ€å®Œå–„ã€æ”¯æŒåŠ¨æ€åŠ è½½ |
| **react-i18next** | React é›†æˆåº“ | Hooks APIã€ç»„ä»¶åŒ–ã€SSR æ”¯æŒ |
| **i18next-browser-languagedetector** | è¯­è¨€æ£€æµ‹ | è‡ªåŠ¨æ£€æµ‹ç”¨æˆ·è¯­è¨€åå¥½ |

### 1.2 æ”¯æŒçš„è¯­è¨€

- ğŸ‡¨ğŸ‡³ ç®€ä½“ä¸­æ–‡ (zh-CN)
- ğŸ‡ºğŸ‡¸ è‹±è¯­ (en-US)
- ğŸ‡¯ğŸ‡µ æ—¥è¯­ (ja-JP) - å¯é€‰
- ğŸ‡°ğŸ‡· éŸ©è¯­ (ko-KR) - å¯é€‰

## äºŒã€å®‰è£…å’Œé…ç½®

### 2.1 å®‰è£…ä¾èµ–

```bash
pnpm add i18next react-i18next i18next-browser-languagedetector
```

### 2.2 é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ i18n/
â”‚   â”œâ”€â”€ index.ts                 # i18n é…ç½®
â”‚   â”œâ”€â”€ locales/
â”‚   â”‚   â”œâ”€â”€ zh-CN/
â”‚   â”‚   â”‚   â”œâ”€â”€ common.json      # é€šç”¨ç¿»è¯‘
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.json        # è®¤è¯æ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ workspace.json   # å·¥ä½œç©ºé—´
â”‚   â”‚   â”‚   â”œâ”€â”€ agent.json       # Agent
â”‚   â”‚   â”‚   â”œâ”€â”€ workflow.json    # Workflow
â”‚   â”‚   â”‚   â””â”€â”€ plugin.json      # æ’ä»¶
â”‚   â”‚   â””â”€â”€ en-US/
â”‚   â”‚       â”œâ”€â”€ common.json
â”‚   â”‚       â”œâ”€â”€ auth.json
â”‚   â”‚       â”œâ”€â”€ workspace.json
â”‚   â”‚       â”œâ”€â”€ agent.json
â”‚   â”‚       â”œâ”€â”€ workflow.json
â”‚   â”‚       â””â”€â”€ plugin.json
â”‚   â””â”€â”€ types.ts                 # ç±»å‹å®šä¹‰
â””â”€â”€ hooks/
    â””â”€â”€ useI18n.ts               # è‡ªå®šä¹‰ Hook
```

### 2.3 åŸºç¡€é…ç½®

**æ–‡ä»¶**: `src/i18n/index.ts`

```typescript
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

// å¯¼å…¥ç¿»è¯‘èµ„æº
import zhCN from './locales/zh-CN';
import enUS from './locales/en-US';

// i18n é…ç½®
i18n
  .use(LanguageDetector) // è‡ªåŠ¨æ£€æµ‹è¯­è¨€
  .use(initReactI18next) // ä¼ é€’ i18n å®ä¾‹ç»™ react-i18next
  .init({
    resources: {
      'zh-CN': zhCN,
      'en-US': enUS,
    },
    fallbackLng: 'zh-CN', // é»˜è®¤è¯­è¨€
    debug: import.meta.env.DEV, // å¼€å‘ç¯å¢ƒå¼€å¯è°ƒè¯•

    // å‘½åç©ºé—´
    ns: ['common', 'auth', 'workspace', 'agent', 'workflow', 'plugin'],
    defaultNS: 'common',

    // æ’å€¼é…ç½®
    interpolation: {
      escapeValue: false, // React å·²ç»å¤„ç†äº† XSS
    },

    // è¯­è¨€æ£€æµ‹é€‰é¡¹
    detection: {
      // æ£€æµ‹é¡ºåº
      order: ['localStorage', 'navigator'],
      // ç¼“å­˜ç”¨æˆ·è¯­è¨€é€‰æ‹©
      caches: ['localStorage'],
      // localStorage key
      lookupLocalStorage: 'coze_lite_language',
    },
  });

export default i18n;
```

**æ–‡ä»¶**: `src/i18n/locales/zh-CN/index.ts`

```typescript
import common from './common.json';
import auth from './auth.json';
import workspace from './workspace.json';
import agent from './agent.json';
import workflow from './workflow.json';
import plugin from './plugin.json';

export default {
  common,
  auth,
  workspace,
  agent,
  workflow,
  plugin,
};
```

### 2.4 å¼•å…¥åˆ°åº”ç”¨

**æ–‡ä»¶**: `src/main.tsx`

```typescript
import React from 'react';
import ReactDOM from 'react-dom/client';
import { App } from './app';
import './i18n'; // å¯¼å…¥ i18n é…ç½®
import './styles/index.css';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);
```

## ä¸‰ã€ç¿»è¯‘èµ„æº

### 3.1 é€šç”¨ç¿»è¯‘

**æ–‡ä»¶**: `src/i18n/locales/zh-CN/common.json`

```json
{
  "app": {
    "name": "Coze Lite",
    "description": "è½»é‡çº§ AI Agent å¼€å‘å¹³å°"
  },
  "actions": {
    "create": "åˆ›å»º",
    "edit": "ç¼–è¾‘",
    "delete": "åˆ é™¤",
    "save": "ä¿å­˜",
    "cancel": "å–æ¶ˆ",
    "confirm": "ç¡®è®¤",
    "submit": "æäº¤",
    "search": "æœç´¢",
    "filter": "ç­›é€‰",
    "refresh": "åˆ·æ–°",
    "back": "è¿”å›",
    "next": "ä¸‹ä¸€æ­¥",
    "previous": "ä¸Šä¸€æ­¥",
    "close": "å…³é—­",
    "download": "ä¸‹è½½",
    "upload": "ä¸Šä¼ ",
    "import": "å¯¼å…¥",
    "export": "å¯¼å‡º"
  },
  "status": {
    "loading": "åŠ è½½ä¸­...",
    "success": "æˆåŠŸ",
    "error": "é”™è¯¯",
    "warning": "è­¦å‘Š",
    "info": "æç¤º",
    "pending": "å¾…å¤„ç†",
    "processing": "å¤„ç†ä¸­",
    "completed": "å·²å®Œæˆ",
    "failed": "å¤±è´¥"
  },
  "validation": {
    "required": "æ­¤å­—æ®µä¸ºå¿…å¡«é¡¹",
    "email": "è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€",
    "minLength": "è‡³å°‘éœ€è¦ {{min}} ä¸ªå­—ç¬¦",
    "maxLength": "æœ€å¤šå…è®¸ {{max}} ä¸ªå­—ç¬¦",
    "pattern": "æ ¼å¼ä¸æ­£ç¡®"
  },
  "messages": {
    "confirmDelete": "ç¡®å®šè¦åˆ é™¤å—ï¼Ÿ",
    "deleteSuccess": "åˆ é™¤æˆåŠŸ",
    "saveSuccess": "ä¿å­˜æˆåŠŸ",
    "operationSuccess": "æ“ä½œæˆåŠŸ",
    "operationFailed": "æ“ä½œå¤±è´¥",
    "noData": "æš‚æ— æ•°æ®",
    "networkError": "ç½‘ç»œé”™è¯¯ï¼Œè¯·é‡è¯•"
  }
}
```

**æ–‡ä»¶**: `src/i18n/locales/en-US/common.json`

```json
{
  "app": {
    "name": "Coze Lite",
    "description": "Lightweight AI Agent Development Platform"
  },
  "actions": {
    "create": "Create",
    "edit": "Edit",
    "delete": "Delete",
    "save": "Save",
    "cancel": "Cancel",
    "confirm": "Confirm",
    "submit": "Submit",
    "search": "Search",
    "filter": "Filter",
    "refresh": "Refresh",
    "back": "Back",
    "next": "Next",
    "previous": "Previous",
    "close": "Close",
    "download": "Download",
    "upload": "Upload",
    "import": "Import",
    "export": "Export"
  },
  "status": {
    "loading": "Loading...",
    "success": "Success",
    "error": "Error",
    "warning": "Warning",
    "info": "Info",
    "pending": "Pending",
    "processing": "Processing",
    "completed": "Completed",
    "failed": "Failed"
  },
  "validation": {
    "required": "This field is required",
    "email": "Please enter a valid email address",
    "minLength": "Minimum {{min}} characters required",
    "maxLength": "Maximum {{max}} characters allowed",
    "pattern": "Invalid format"
  },
  "messages": {
    "confirmDelete": "Are you sure you want to delete?",
    "deleteSuccess": "Deleted successfully",
    "saveSuccess": "Saved successfully",
    "operationSuccess": "Operation successful",
    "operationFailed": "Operation failed",
    "noData": "No data available",
    "networkError": "Network error, please try again"
  }
}
```

### 3.2 è®¤è¯æ¨¡å—ç¿»è¯‘

**æ–‡ä»¶**: `src/i18n/locales/zh-CN/auth.json`

```json
{
  "login": {
    "title": "ç™»å½•",
    "username": "ç”¨æˆ·å",
    "password": "å¯†ç ",
    "rememberMe": "è®°ä½æˆ‘",
    "forgotPassword": "å¿˜è®°å¯†ç ï¼Ÿ",
    "loginButton": "ç™»å½•",
    "noAccount": "è¿˜æ²¡æœ‰è´¦æˆ·ï¼Ÿ",
    "registerNow": "ç«‹å³æ³¨å†Œ",
    "demoAccount": "æ¼”ç¤ºè´¦æˆ·",
    "loginSuccess": "ç™»å½•æˆåŠŸï¼",
    "loginFailed": "ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç "
  },
  "register": {
    "title": "æ³¨å†Œ",
    "username": "ç”¨æˆ·å",
    "email": "é‚®ç®±",
    "password": "å¯†ç ",
    "confirmPassword": "ç¡®è®¤å¯†ç ",
    "registerButton": "æ³¨å†Œ",
    "hasAccount": "å·²æœ‰è´¦æˆ·ï¼Ÿ",
    "loginNow": "ç«‹å³ç™»å½•",
    "passwordMismatch": "ä¸¤æ¬¡å¯†ç è¾“å…¥ä¸ä¸€è‡´",
    "registerSuccess": "æ³¨å†ŒæˆåŠŸï¼",
    "registerFailed": "æ³¨å†Œå¤±è´¥ï¼Œè¯·é‡è¯•"
  },
  "logout": {
    "confirm": "ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ",
    "success": "å·²é€€å‡ºç™»å½•"
  }
}
```

### 3.3 å·¥ä½œç©ºé—´æ¨¡å—ç¿»è¯‘

**æ–‡ä»¶**: `src/i18n/locales/zh-CN/workspace.json`

```json
{
  "title": "å·¥ä½œç©ºé—´",
  "create": "åˆ›å»ºå·¥ä½œç©ºé—´",
  "edit": "ç¼–è¾‘å·¥ä½œç©ºé—´",
  "delete": "åˆ é™¤å·¥ä½œç©ºé—´",
  "name": "åç§°",
  "description": "æè¿°",
  "createdAt": "åˆ›å»ºæ—¶é—´",
  "updatedAt": "æ›´æ–°æ—¶é—´",
  "empty": "æš‚æ— å·¥ä½œç©ºé—´",
  "createFirst": "åˆ›å»ºç¬¬ä¸€ä¸ªå·¥ä½œç©ºé—´",
  "list": {
    "title": "æˆ‘çš„å·¥ä½œç©ºé—´",
    "search": "æœç´¢å·¥ä½œç©ºé—´"
  },
  "form": {
    "namePlaceholder": "è¯·è¾“å…¥å·¥ä½œç©ºé—´åç§°",
    "descriptionPlaceholder": "è¯·è¾“å…¥å·¥ä½œç©ºé—´æè¿°"
  },
  "messages": {
    "createSuccess": "å·¥ä½œç©ºé—´åˆ›å»ºæˆåŠŸ",
    "updateSuccess": "å·¥ä½œç©ºé—´æ›´æ–°æˆåŠŸ",
    "deleteSuccess": "å·¥ä½œç©ºé—´åˆ é™¤æˆåŠŸ",
    "deleteFailed": "å·¥ä½œç©ºé—´åˆ é™¤å¤±è´¥"
  }
}
```

## å››ã€ä½¿ç”¨æ–¹æ³•

### 4.1 ä½¿ç”¨ Hook

**useTranslation Hook**:

```typescript
import { useTranslation } from 'react-i18next';

function LoginPage() {
  const { t } = useTranslation('auth');

  return (
    <div>
      <h1>{t('login.title')}</h1>
      <input placeholder={t('login.username')} />
      <input placeholder={t('login.password')} />
      <button>{t('login.loginButton')}</button>
    </div>
  );
}
```

**å¸¦æ’å€¼çš„ç¿»è¯‘**:

```typescript
const { t } = useTranslation('common');

// ä½¿ç”¨æ’å€¼
<p>{t('validation.minLength', { min: 6 })}</p>
// è¾“å‡º: "è‡³å°‘éœ€è¦ 6 ä¸ªå­—ç¬¦"
```

**å¤šå‘½åç©ºé—´**:

```typescript
const { t } = useTranslation(['auth', 'common']);

// ä½¿ç”¨ä¸åŒå‘½åç©ºé—´
<h1>{t('auth:login.title')}</h1>
<button>{t('common:actions.submit')}</button>
```

### 4.2 ä½¿ç”¨ Trans ç»„ä»¶

**å¤„ç†å¤æ‚æ–‡æœ¬**:

```typescript
import { Trans } from 'react-i18next';

// ç¿»è¯‘èµ„æº
{
  "welcome": "æ¬¢è¿æ¥åˆ° <strong>{{appName}}</strong>ï¼Œå¼€å§‹<link>åˆ›å»º Agent</link>"
}

// ä½¿ç”¨ç»„ä»¶
<Trans
  i18nKey="welcome"
  values={{ appName: 'Coze Lite' }}
  components={{
    strong: <strong />,
    link: <a href="/workspace" />
  }}
/>
```

### 4.3 ä½¿ç”¨ t å‡½æ•°ï¼ˆéç»„ä»¶ä¸­ï¼‰

```typescript
import i18n from '@/i18n';

// åœ¨å·¥å…·å‡½æ•°ä¸­ä½¿ç”¨
function validateForm(data) {
  if (!data.username) {
    return i18n.t('common:validation.required');
  }
  return null;
}

// åœ¨ API æ‹¦æˆªå™¨ä¸­ä½¿ç”¨
axios.interceptors.response.use(
  response => response,
  error => {
    if (error.response?.status === 401) {
      Message.error(i18n.t('auth:login.loginFailed'));
    }
    return Promise.reject(error);
  }
);
```

### 4.4 åŠ¨æ€è¯­è¨€åˆ‡æ¢

```typescript
import { useTranslation } from 'react-i18next';
import { Select } from '@arco-design/web-react';

function LanguageSwitcher() {
  const { i18n } = useTranslation();

  const languages = [
    { label: 'ç®€ä½“ä¸­æ–‡', value: 'zh-CN' },
    { label: 'English', value: 'en-US' },
  ];

  const handleChange = (lang: string) => {
    i18n.changeLanguage(lang);
  };

  return (
    <Select
      value={i18n.language}
      options={languages}
      onChange={handleChange}
    />
  );
}
```

## äº”ã€é«˜çº§åŠŸèƒ½

### 5.1 æ‡’åŠ è½½ç¿»è¯‘èµ„æº

**é…ç½®æ‡’åŠ è½½**:

```typescript
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import Backend from 'i18next-http-backend';

i18n
  .use(Backend)
  .use(initReactI18next)
  .init({
    backend: {
      loadPath: '/locales/{{lng}}/{{ns}}.json',
    },
    // å…¶ä»–é…ç½®...
  });
```

### 5.2 å¤æ•°å¤„ç†

**ç¿»è¯‘èµ„æº**:

```json
{
  "items": "{{count}} ä¸ªé¡¹ç›®",
  "items_plural": "{{count}} ä¸ªé¡¹ç›®"
}
```

**ä½¿ç”¨**:

```typescript
const { t } = useTranslation();

<p>{t('items', { count: 1 })}</p>  // "1 ä¸ªé¡¹ç›®"
<p>{t('items', { count: 5 })}</p>  // "5 ä¸ªé¡¹ç›®"
```

### 5.3 æ—¥æœŸå’Œæ•°å­—æ ¼å¼åŒ–

**å®‰è£… dayjs**:

```bash
pnpm add dayjs
```

**é…ç½®**:

```typescript
import dayjs from 'dayjs';
import 'dayjs/locale/zh-cn';
import 'dayjs/locale/en';

export function formatDate(date: string | Date, locale: string) {
  dayjs.locale(locale === 'zh-CN' ? 'zh-cn' : 'en');
  return dayjs(date).format('YYYY-MM-DD HH:mm:ss');
}

export function formatNumber(num: number, locale: string) {
  return new Intl.NumberFormat(locale).format(num);
}
```

**ä½¿ç”¨**:

```typescript
import { formatDate, formatNumber } from '@/utils/format';

const { i18n } = useTranslation();

<p>{formatDate(new Date(), i18n.language)}</p>
<p>{formatNumber(1234567, i18n.language)}</p>
```

### 5.4 ä¸Šä¸‹æ–‡ç¿»è¯‘

**ç¿»è¯‘èµ„æº**:

```json
{
  "status_draft": "è‰ç¨¿",
  "status_published": "å·²å‘å¸ƒ",
  "status_archived": "å·²å½’æ¡£"
}
```

**ä½¿ç”¨**:

```typescript
const { t } = useTranslation();

function StatusTag({ status }: { status: string }) {
  return <Tag>{t(`status_${status}`)}</Tag>;
}
```

## å…­ã€è‡ªå®šä¹‰ Hook

### 6.1 useI18n Hook

**æ–‡ä»¶**: `src/hooks/useI18n.ts`

```typescript
import { useTranslation } from 'react-i18next';
import { useCallback } from 'react';

export function useI18n(namespace?: string | string[]) {
  const { t, i18n } = useTranslation(namespace);

  const changeLanguage = useCallback((lang: string) => {
    i18n.changeLanguage(lang);
  }, [i18n]);

  const currentLanguage = i18n.language;
  const languages = ['zh-CN', 'en-US'];

  return {
    t,
    i18n,
    currentLanguage,
    languages,
    changeLanguage,
  };
}
```

**ä½¿ç”¨**:

```typescript
function MyComponent() {
  const { t, currentLanguage, changeLanguage } = useI18n('workspace');

  return (
    <div>
      <h1>{t('title')}</h1>
      <button onClick={() => changeLanguage('en-US')}>
        Switch to English
      </button>
    </div>
  );
}
```

### 6.2 useFormatMessage Hook

```typescript
import { useTranslation } from 'react-i18next';
import { useCallback } from 'react';

export function useFormatMessage() {
  const { t } = useTranslation();

  const formatMessage = useCallback((
    key: string,
    values?: Record<string, any>
  ) => {
    return t(key, values);
  }, [t]);

  return { formatMessage };
}
```

## ä¸ƒã€ç±»å‹å®‰å…¨

### 7.1 å®šä¹‰ç¿»è¯‘ç±»å‹

**æ–‡ä»¶**: `src/i18n/types.ts`

```typescript
import type zhCN from './locales/zh-CN';

export type TranslationResource = typeof zhCN;

export type Namespace = keyof TranslationResource;

export type TranslationKey<NS extends Namespace> =
  keyof TranslationResource[NS];

// ä½¿ç”¨ç¤ºä¾‹
declare module 'react-i18next' {
  interface CustomTypeOptions {
    defaultNS: 'common';
    resources: TranslationResource;
  }
}
```

### 7.2 ç±»å‹å®‰å…¨çš„ t å‡½æ•°

```typescript
import { useTranslation } from 'react-i18next';

function TypeSafeComponent() {
  const { t } = useTranslation('auth');

  // TypeScript ä¼šæç¤ºå¯ç”¨çš„ key
  return (
    <div>
      <h1>{t('login.title')}</h1>
      {/* é”™è¯¯çš„ key ä¼šæŠ¥é”™ */}
      {/* <p>{t('login.wrongKey')}</p> */}
    </div>
  );
}
```

## å…«ã€æœ€ä½³å®è·µ

### 8.1 ç»„ç»‡ç¿»è¯‘èµ„æº

**æŒ‰æ¨¡å—ç»„ç»‡**:

```
locales/
â”œâ”€â”€ zh-CN/
â”‚   â”œâ”€â”€ common.json      # é€šç”¨ç¿»è¯‘
â”‚   â”œâ”€â”€ auth.json        # è®¤è¯æ¨¡å—
â”‚   â”œâ”€â”€ workspace.json   # å·¥ä½œç©ºé—´
â”‚   â””â”€â”€ ...
â””â”€â”€ en-US/
    â”œâ”€â”€ common.json
    â”œâ”€â”€ auth.json
    â”œâ”€â”€ workspace.json
    â””â”€â”€ ...
```

**å‘½åè§„èŒƒ**:

```json
{
  "module": {
    "action": "ç¿»è¯‘æ–‡æœ¬",
    "action.subAction": "å­æ“ä½œ",
    "messages.success": "æˆåŠŸæ¶ˆæ¯"
  }
}
```

### 8.2 é¿å…ç¡¬ç¼–ç 

âŒ **ä¸æ¨è**:

```typescript
<button>ä¿å­˜</button>
<p>æ“ä½œæˆåŠŸ</p>
```

âœ… **æ¨è**:

```typescript
const { t } = useTranslation('common');

<button>{t('actions.save')}</button>
<p>{t('messages.operationSuccess')}</p>
```

### 8.3 æå–å¸¸é‡

```typescript
// ç¿»è¯‘ key å¸¸é‡
export const I18N_KEYS = {
  COMMON: {
    SAVE: 'common:actions.save',
    CANCEL: 'common:actions.cancel',
  },
  AUTH: {
    LOGIN_TITLE: 'auth:login.title',
    LOGIN_BUTTON: 'auth:login.loginButton',
  },
} as const;

// ä½¿ç”¨
const { t } = useTranslation();
<button>{t(I18N_KEYS.COMMON.SAVE)}</button>
```

### 8.4 å¤„ç†ç¼ºå¤±ç¿»è¯‘

```typescript
i18n.init({
  // å…¶ä»–é…ç½®...

  // ç¼ºå¤±ç¿»è¯‘æ—¶æ˜¾ç¤º key
  missingKeyHandler: (lng, ns, key) => {
    console.warn(`Missing translation: ${lng} ${ns} ${key}`);
  },

  // æ˜¾ç¤ºé»˜è®¤æ–‡æœ¬
  parseMissingKeyHandler: (key) => {
    return `[Missing: ${key}]`;
  },
});
```

## ä¹ã€æ€§èƒ½ä¼˜åŒ–

### 9.1 æŒ‰éœ€åŠ è½½

```typescript
import i18n from 'i18next';
import Backend from 'i18next-http-backend';

i18n
  .use(Backend)
  .init({
    backend: {
      loadPath: '/locales/{{lng}}/{{ns}}.json',
    },
    ns: ['common'], // åªé¢„åŠ è½½ common
    defaultNS: 'common',
  });

// æŒ‰éœ€åŠ è½½å…¶ä»–å‘½åç©ºé—´
i18n.loadNamespaces(['auth', 'workspace']);
```

### 9.2 ç¼“å­˜ç¿»è¯‘

```typescript
i18n.init({
  // å…¶ä»–é…ç½®...

  // å¯ç”¨ç¼“å­˜
  cache: {
    enabled: true,
    expirationTime: 7 * 24 * 60 * 60 * 1000, // 7 å¤©
  },
});
```

### 9.3 é¿å…é‡å¤æ¸²æŸ“

```typescript
import { memo } from 'react';
import { useTranslation } from 'react-i18next';

const TranslatedComponent = memo(() => {
  const { t } = useTranslation();

  return <div>{t('common:title')}</div>;
});
```

## åã€æµ‹è¯•

### 10.1 æµ‹è¯•é…ç½®

```typescript
import { render } from '@testing-library/react';
import { I18nextProvider } from 'react-i18next';
import i18n from '@/i18n';

function renderWithI18n(component: React.ReactElement) {
  return render(
    <I18nextProvider i18n={i18n}>
      {component}
    </I18nextProvider>
  );
}
```

### 10.2 æµ‹è¯•ç”¨ä¾‹

```typescript
import { renderWithI18n } from '@/test/utils';
import LoginPage from '@/pages/auth/login';

describe('LoginPage', () => {
  it('should display translated text', () => {
    const { getByText } = renderWithI18n(<LoginPage />);

    expect(getByText('ç™»å½•')).toBeInTheDocument();
    expect(getByText('ç”¨æˆ·å')).toBeInTheDocument();
  });

  it('should switch language', async () => {
    const { i18n } = renderWithI18n(<LoginPage />);

    await i18n.changeLanguage('en-US');

    expect(i18n.language).toBe('en-US');
  });
});
```

## åä¸€ã€å¸¸è§é—®é¢˜

### 11.1 ç¿»è¯‘ä¸æ›´æ–°

**é—®é¢˜**: ä¿®æ”¹ç¿»è¯‘æ–‡ä»¶åä¸ç”Ÿæ•ˆ

**è§£å†³**:
```bash
# æ¸…é™¤ç¼“å­˜
localStorage.clear();

# é‡å¯å¼€å‘æœåŠ¡å™¨
pnpm dev
```

### 11.2 æ’å€¼ä¸æ˜¾ç¤º

**é—®é¢˜**: `{{value}}` ä¸æ˜¾ç¤º

**è§£å†³**:
```typescript
// âŒ é”™è¯¯
t('message', { value: 123 })

// âœ… æ­£ç¡® - æ£€æŸ¥ JSON ä¸­çš„ key
{
  "message": "æ•°é‡: {{count}}"
}
t('message', { count: 123 })
```

### 11.3 åµŒå¥—ç¿»è¯‘ä¸å·¥ä½œ

**é—®é¢˜**: æ— æ³•è®¿é—®åµŒå¥—çš„ç¿»è¯‘

**è§£å†³**:
```json
{
  "user": {
    "profile": {
      "name": "ç”¨æˆ·å"
    }
  }
}

// ä½¿ç”¨ç‚¹å·è®¿é—®
t('user.profile.name')
```

## åäºŒã€å‚è€ƒèµ„æº

### 12.1 å®˜æ–¹æ–‡æ¡£

- [i18next æ–‡æ¡£](https://www.i18next.com/)
- [react-i18next æ–‡æ¡£](https://react.i18next.com/)
- [i18next æœ€ä½³å®è·µ](https://www.i18next.com/principles/best-practices)

### 12.2 å·¥å…·

- [i18next Scanner](https://github.com/i18next/i18next-scanner) - æ‰«æä»£ç æå–ç¿»è¯‘
- [i18n Ally](https://github.com/lokalise/i18n-ally) - VSCode æ’ä»¶

### 12.3 æºç å‚è€ƒ

- **Coze Studio**: `@coze-arch/i18n`
- **i18n é…ç½®**: `@coze-foundation/i18n`

---

**æ–‡æ¡£ç»´æŠ¤è€…**: Coze Lite Team
**æœ€åæ›´æ–°**: 2025-11-30
