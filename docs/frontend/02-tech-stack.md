# Coze Studio æŠ€æœ¯æ ˆè¯¦è§£ä¸ Coze Lite é€‰å‹å»ºè®®

> æ·±å…¥åˆ†æ Coze Studio çš„æŠ€æœ¯é€‰å‹ï¼Œä¸º Coze Lite æä¾›ç®€åŒ–å»ºè®®

## 1. Coze Studio æŠ€æœ¯æ ˆå…¨è²Œ

### 1.1 æ ¸å¿ƒæ¡†æ¶

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | Coze Lite å»ºè®® |
|------|------|------|----------------|
| React | 18.2.0 | UI æ¡†æ¶ | âœ… ä¿ç•™ 18.2+ |
| TypeScript | 5.8.2 | ç±»å‹ç³»ç»Ÿ | âœ… ä¿ç•™ 5.x |
| React Router | 6.x | è·¯ç”±ç®¡ç† | âœ… ä¿ç•™ v6 |

### 1.2 æ„å»ºå’ŒåŒ…ç®¡ç†

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | Coze Lite å»ºè®® |
|------|------|------|----------------|
| Rsbuild | 1.1.0 | æ„å»ºå·¥å…·ï¼ˆåŸºäº Rspackï¼‰ | ğŸ”„ æ”¹ç”¨ **Vite** |
| Rush | 5.147.1 | Monorepo ç®¡ç† | ğŸ”„ æ”¹ç”¨ **PNPM Workspace** |
| PNPM | 8.15.8 | åŒ…ç®¡ç†å™¨ | âœ… ä¿ç•™ PNPM |

**ä¸ºä»€ä¹ˆæ¢æˆ Viteï¼Ÿ**
- âœ… å¼€å‘ä½“éªŒæ›´å¥½ï¼ˆHMR æ›´å¿«ï¼‰
- âœ… é…ç½®æ›´ç®€å•
- âœ… ç”Ÿæ€æ›´æˆç†Ÿ
- âœ… å¯¹å­¦ä¹ é¡¹ç›®æ›´å‹å¥½

### 1.3 çŠ¶æ€ç®¡ç†

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | Coze Lite å»ºè®® |
|------|------|------|----------------|
| Zustand | 4.4.7 | è½»é‡çŠ¶æ€ç®¡ç† | âœ… ä¿ç•™ |
| React Context | - | è·¨ç»„ä»¶é€šä¿¡ | âœ… ä¿ç•™ |

**ä¸ºä»€ä¹ˆé€‰ Zustandï¼Ÿ**
- âœ… API ç®€å•ï¼ˆæ¯” Redux ç®€å•å¾ˆå¤šï¼‰
- âœ… æ€§èƒ½å¥½ï¼ˆåŸºäº selectorï¼‰
- âœ… TypeScript æ”¯æŒå¥½
- âœ… æ— éœ€ Provider åŒ…è£¹

### 1.4 UI æ¡†æ¶

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | Coze Lite å»ºè®® |
|------|------|------|----------------|
| @coze-design | 0.0.6 | è‡ªå®šä¹‰ UI åº“ï¼ˆåŸºäº Semi Designï¼‰ | ğŸ”„ æ”¹ç”¨ **Arco Design** |
| TailwindCSS | 3.3.3 | CSS å·¥å…·åº“ | âœ… ä¿ç•™ |
| CSS Modules | - | CSS ä½œç”¨åŸŸ | âœ… ä¿ç•™ |

**ä¸ºä»€ä¹ˆç”¨ Arco Designï¼Ÿ**
- âœ… å­—èŠ‚å¼€æºï¼Œä¸ Coze é£æ ¼æ¥è¿‘
- âœ… ç»„ä»¶ä¸°å¯Œï¼Œæ–‡æ¡£å®Œå–„
- âœ… TypeScript æ”¯æŒå¥½
- âœ… ä¸»é¢˜å®šåˆ¶èƒ½åŠ›å¼º

### 1.5 å·¥å…·åº“

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | Coze Lite å»ºè®® |
|------|------|------|----------------|
| ahooks | 3.7.8 | React Hooks é›†åˆ | âœ… ä¿ç•™ |
| lodash-es | 4.17.21 | å·¥å…·å‡½æ•° | âœ… ä¿ç•™ |
| classnames | 2.3.2 | className å¤„ç† | âœ… ä¿ç•™ |

### 1.6 ç‰¹æ®ŠåŠŸèƒ½

| æŠ€æœ¯ | ç”¨é€” | Coze Lite å»ºè®® |
|------|------|----------------|
| FlowGram | å·¥ä½œæµç¼–è¾‘å™¨ï¼ˆå­—èŠ‚å¼€æºï¼‰ | âœ… ä¿ç•™æˆ–ç®€åŒ– |
| Fabric.js | Canvas æ¸²æŸ“ | âœ… ä¿ç•™ï¼ˆWorkflow éœ€è¦ï¼‰ |
| @coze-arch/i18n | å›½é™…åŒ– | ğŸ”„ æ”¹ç”¨ **react-i18next** |

## 2. Coze Lite æ¨èæŠ€æœ¯æ ˆ

### 2.1 å®Œæ•´æŠ€æœ¯æ ˆ

```yaml
æ ¸å¿ƒæ¡†æ¶:
  - React: ^18.2.0
  - TypeScript: ^5.3.0
  - React Router: ^6.20.0

æ„å»ºå·¥å…·:
  - Vite: ^5.0.0
  - PNPM: ^8.15.0

çŠ¶æ€ç®¡ç†:
  - Zustand: ^4.4.7

UI æ¡†æ¶:
  - Arco Design: ^2.60.0
  - TailwindCSS: ^3.4.0

å·¥å…·åº“:
  - ahooks: ^3.7.8
  - lodash-es: ^4.17.21
  - classnames: ^2.3.2
  - dayjs: ^1.11.10

å·¥ä½œæµ:
  - Fabric.js: ^5.3.0
  - react-flow (å¯é€‰): ^11.10.0

å›½é™…åŒ–:
  - react-i18next: ^14.0.0
  - i18next: ^23.7.0

å¼€å‘å·¥å…·:
  - ESLint: ^8.56.0
  - Prettier: ^3.1.0
  - Vitest: ^1.0.0
```

### 2.2 package.json ç¤ºä¾‹

```json
{
  "name": "coze-lite",
  "version": "0.1.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    "lint": "eslint . --ext ts,tsx",
    "test": "vitest"
  },
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^6.20.0",
    "zustand": "^4.4.7",
    "@arco-design/web-react": "^2.60.0",
    "ahooks": "^3.7.8",
    "lodash-es": "^4.17.21",
    "classnames": "^2.3.2",
    "dayjs": "^1.11.10",
    "react-i18next": "^14.0.0",
    "i18next": "^23.7.0"
  },
  "devDependencies": {
    "@types/react": "^18.2.43",
    "@types/react-dom": "^18.2.17",
    "@types/lodash-es": "^4.17.12",
    "@vitejs/plugin-react": "^4.2.1",
    "typescript": "^5.3.3",
    "vite": "^5.0.8",
    "eslint": "^8.56.0",
    "prettier": "^3.1.0",
    "tailwindcss": "^3.4.0",
    "autoprefixer": "^10.4.16",
    "postcss": "^8.4.32",
    "vitest": "^1.0.0"
  }
}
```

## 3. æŠ€æœ¯æ ˆè¯¦ç»†å¯¹æ¯”

### 3.1 æ„å»ºå·¥å…·ï¼šRsbuild vs Vite

#### Coze Studio (Rsbuild)

```typescript
// rsbuild.config.ts
export default {
  source: {
    entry: {
      index: './src/index.tsx',
    },
  },
  output: {
    distPath: {
      root: 'dist',
    },
  },
  plugins: [
    // å„ç§æ’ä»¶...
  ],
};
```

**ç‰¹ç‚¹**ï¼š
- âœ… åŸºäº Rspackï¼ˆæ€§èƒ½å¥½ï¼‰
- âœ… é…ç½®ç®€å•
- âŒ ç›¸å¯¹è¾ƒæ–°ï¼Œç”Ÿæ€å°

#### Coze Lite (Vite)

```typescript
// vite.config.ts
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig({
  plugins: [react()],
  server: {
    port: 3000,
  },
  build: {
    outDir: 'dist',
  },
});
```

**ä¼˜åŠ¿**ï¼š
- âœ… å¼€å‘ä½“éªŒæä½³ï¼ˆHMR ç§’çº§ï¼‰
- âœ… ç”Ÿæ€æˆç†Ÿï¼Œæ’ä»¶ä¸°å¯Œ
- âœ… é…ç½®ç®€å•ç›´è§‚
- âœ… ç¤¾åŒºæ´»è·ƒ

### 3.2 UI åº“ï¼š@coze-design vs Arco Design

#### Coze Studio (@coze-design)

```tsx
import { Button, Input } from '@coze-arch/coze-design';

<Button type="primary">ä¿å­˜</Button>
```

**ç‰¹ç‚¹**ï¼š
- âœ… æ·±åº¦å®šåˆ¶
- âŒ ä¸å¼€æºï¼Œæ— æ³•ç›´æ¥ä½¿ç”¨

#### Coze Lite (Arco Design)

```tsx
import { Button, Input } from '@arco-design/web-react';

<Button type="primary">ä¿å­˜</Button>
```

**ä¼˜åŠ¿**ï¼š
- âœ… å­—èŠ‚å¼€æºï¼Œé£æ ¼æ¥è¿‘
- âœ… ç»„ä»¶ä¸°å¯Œï¼ˆ60+ ç»„ä»¶ï¼‰
- âœ… TypeScript åŸç”Ÿæ”¯æŒ
- âœ… ä¸»é¢˜å®šåˆ¶çµæ´»

### 3.3 çŠ¶æ€ç®¡ç†ï¼šZustand ä½¿ç”¨ç¤ºä¾‹

#### åŸºç¡€ç”¨æ³•

```typescript
// stores/user.ts
import { create } from 'zustand';

interface UserStore {
  user: User | null;
  token: string | null;
  login: (username: string, password: string) => Promise<void>;
  logout: () => void;
}

export const useUserStore = create<UserStore>((set) => ({
  user: null,
  token: null,

  login: async (username, password) => {
    const res = await api.login({ username, password });
    set({ user: res.user, token: res.token });
    localStorage.setItem('token', res.token);
  },

  logout: () => {
    set({ user: null, token: null });
    localStorage.removeItem('token');
  },
}));

// ç»„ä»¶ä¸­ä½¿ç”¨
function UserProfile() {
  const user = useUserStore((state) => state.user);
  const logout = useUserStore((state) => state.logout);

  return <div onClick={logout}>{user?.name}</div>;
}
```

#### æŒä¹…åŒ–

```typescript
import { persist } from 'zustand/middleware';

export const useUserStore = create(
  persist<UserStore>(
    (set) => ({
      user: null,
      token: null,
      // ...
    }),
    {
      name: 'user-storage', // localStorage key
    }
  )
);
```

### 3.4 å›½é™…åŒ–ï¼šè‡ªå®šä¹‰ vs react-i18next

#### Coze Studio (è‡ªå®šä¹‰ i18n)

```typescript
import { useTranslation } from '@coze-arch/i18n';

function MyComponent() {
  const { t } = useTranslation();
  return <div>{t('common.save')}</div>;
}
```

#### Coze Lite (react-i18next)

```typescript
// i18n.ts
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';

i18n.use(initReactI18next).init({
  resources: {
    en: {
      translation: {
        'common.save': 'Save',
      },
    },
    'zh-CN': {
      translation: {
        'common.save': 'ä¿å­˜',
      },
    },
  },
  lng: 'zh-CN',
  fallbackLng: 'en',
});

// ä½¿ç”¨
import { useTranslation } from 'react-i18next';

function MyComponent() {
  const { t } = useTranslation();
  return <div>{t('common.save')}</div>;
}
```

## 4. Workflow æŠ€æœ¯æ–¹æ¡ˆ

### 4.1 Coze Studio æ–¹æ¡ˆï¼ˆFlowGramï¼‰

```typescript
// åŸºäº FlowGram + Fabric.js
import { FlowGram } from '@bytedance/flowgram';

const editor = new FlowGram({
  container: '#canvas',
  // é…ç½®...
});
```

**ç‰¹ç‚¹**ï¼š
- âœ… å­—èŠ‚å†…éƒ¨æ–¹æ¡ˆï¼ŒåŠŸèƒ½å¼ºå¤§
- âŒ å­¦ä¹ æ›²çº¿é™¡

### 4.2 Coze Lite å¤‡é€‰æ–¹æ¡ˆ

#### æ–¹æ¡ˆ 1ï¼šReact Flowï¼ˆæ¨èï¼‰

```typescript
import ReactFlow, { Controls, Background } from 'reactflow';
import 'reactflow/dist/style.css';

function WorkflowEditor() {
  const [nodes, setNodes] = useState([]);
  const [edges, setEdges] = useState([]);

  return (
    <ReactFlow nodes={nodes} edges={edges}>
      <Controls />
      <Background />
    </ReactFlow>
  );
}
```

**ä¼˜åŠ¿**ï¼š
- âœ… React ç”Ÿæ€ï¼Œæ˜“ä¸Šæ‰‹
- âœ… æ–‡æ¡£å®Œå–„ï¼Œç¤ºä¾‹ä¸°å¯Œ
- âœ… æ€§èƒ½å¥½ï¼Œæ”¯æŒå¤§è§„æ¨¡èŠ‚ç‚¹

#### æ–¹æ¡ˆ 2ï¼šä¿ç•™ FlowGramï¼ˆæ·±åº¦å­¦ä¹ ï¼‰

å¦‚æœæƒ³æ·±å…¥å­¦ä¹  Coze çš„ Workflow å®ç°ï¼Œå¯ä»¥ä¿ç•™ FlowGramã€‚

## 5. å¼€å‘å·¥å…·é“¾

### 5.1 ä»£ç è§„èŒƒ

```json
// .eslintrc.json
{
  "extends": [
    "eslint:recommended",
    "plugin:@typescript-eslint/recommended",
    "plugin:react/recommended",
    "plugin:react-hooks/recommended"
  ],
  "rules": {
    "react/react-in-jsx-scope": "off"
  }
}

// .prettierrc
{
  "semi": true,
  "singleQuote": true,
  "tabWidth": 2,
  "trailingComma": "es5"
}
```

### 5.2 TypeScript é…ç½®

```json
// tsconfig.json
{
  "compilerOptions": {
    "target": "ES2020",
    "useDefineForClassFields": true,
    "lib": ["ES2020", "DOM", "DOM.Iterable"],
    "module": "ESNext",
    "skipLibCheck": true,

    "moduleResolution": "bundler",
    "allowImportingTsExtensions": true,
    "resolveJsonModule": true,
    "isolatedModules": true,
    "noEmit": true,
    "jsx": "react-jsx",

    "strict": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noFallthroughCasesInSwitch": true,

    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"]
    }
  },
  "include": ["src"],
  "references": [{ "path": "./tsconfig.node.json" }]
}
```

## 6. æŠ€æœ¯é€‰å‹å†³ç­–æ ‘

```
é€‰æ‹©æŠ€æœ¯æ ˆæ—¶çš„è€ƒè™‘å› ç´ ï¼š

å­¦ä¹ ç›®çš„ï¼Ÿ
â”œâ”€ æ˜¯ï¼šå­¦ä¹  Coze å®Œæ•´æŠ€æœ¯ â†’ å°½é‡ä¿ç•™åŸæŠ€æœ¯æ ˆ
â””â”€ å¦ï¼šå¿«é€Ÿå®ç°åŠŸèƒ½ â†’ ä½¿ç”¨æˆç†Ÿç®€å•çš„æ–¹æ¡ˆ

æœ‰ Monorepo éœ€æ±‚ï¼Ÿ
â”œâ”€ æ˜¯ï¼ˆ50+ åŒ…ï¼‰â†’ Rush
â”œâ”€ ä¸­ï¼ˆ5-10 åŒ…ï¼‰â†’ PNPM Workspace
â””â”€ å¦ï¼ˆå•ä½“ï¼‰â†’ å• package.json

UI å®šåˆ¶ç¨‹åº¦ï¼Ÿ
â”œâ”€ é«˜åº¦å®šåˆ¶ â†’ è‡ªå»ºç»„ä»¶åº“
â”œâ”€ ä¸­ç­‰å®šåˆ¶ â†’ Arco Design + ä¸»é¢˜
â””â”€ ä½¿ç”¨é»˜è®¤ â†’ ä»»ä½• UI åº“

å›¢é˜Ÿè§„æ¨¡ï¼Ÿ
â”œâ”€ å¤§å›¢é˜Ÿ â†’ å¤æ‚æ¶æ„ï¼Œä¸¥æ ¼è§„èŒƒ
â””â”€ å°å›¢é˜Ÿ/ä¸ªäºº â†’ ç®€å•æ¶æ„ï¼Œå¿«é€Ÿè¿­ä»£
```

## 7. æ€»ç»“å¯¹æ¯”

| æ–¹é¢ | Coze Studio | Coze Liteï¼ˆæ¨èï¼‰ |
|------|-------------|-------------------|
| æ„å»ºå·¥å…· | Rsbuild | Vite |
| åŒ…ç®¡ç† | Rush + PNPM | PNPM (Workspace) |
| UI åº“ | @coze-design | Arco Design |
| å›½é™…åŒ– | è‡ªå®šä¹‰ | react-i18next |
| çŠ¶æ€ç®¡ç† | Zustand âœ… | Zustand âœ… |
| è·¯ç”± | React Router v6 âœ… | React Router v6 âœ… |
| å·¥ä½œæµ | FlowGram | React Flow |
| å¤æ‚åº¦ | é«˜ï¼ˆä¼ä¸šçº§ï¼‰ | ä¸­ï¼ˆå­¦ä¹ çº§ï¼‰ |

## 8. ä¸‹ä¸€æ­¥

- âœ… å·²äº†è§£æŠ€æœ¯æ ˆé€‰å‹
- ğŸ“ ä¸‹ä¸€æ­¥ï¼šé˜…è¯» `03-project-setup.md` å¼€å§‹é¡¹ç›®åˆå§‹åŒ–

---

**æ¨èå­¦ä¹ è·¯å¾„**ï¼š
1. å…ˆç”¨ç®€åŒ–æŠ€æœ¯æ ˆå¿«é€Ÿæ­å»º MVP
2. æ ¸å¿ƒåŠŸèƒ½å®Œæˆåï¼Œå†é€æ­¥å¯¹ç…§ Coze Studio ä¼˜åŒ–
3. æ·±å…¥å­¦ä¹ ç‰¹å®šæ¨¡å—ï¼ˆå¦‚ Workflowï¼‰æ—¶å‚è€ƒåŸå§‹æŠ€æœ¯

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0 | 2025-11-30
